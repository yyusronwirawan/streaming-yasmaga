import{r as c,a as u,j as n,b as e,S as i}from"./main-0ef92fc4.js";import{H as P,a as D}from"./index-8e00322f.js";const H=()=>{const[p,C]=c.useState([]),[b,h]=c.useState(!1),[m,f]=c.useState(!1),[x,y]=c.useState(null),[o,s]=c.useState({name:"",metadata:{image:null,type:"",value:""}});c.useEffect(()=>{g()},[b]);const g=async()=>{try{const t=await u.get("/api/contents");if(t.data&&t.data.contents){const r=t.data.contents.map(a=>({...a,metadata:JSON.parse(a.metadata)}));C(r)}}catch(t){console.error("Error fetching contents:",t)}},N=()=>{h(!1),f(!1),y(null),s({name:"",metadata:{image:null,type:"",value:""}})},v=t=>{const{name:r,value:a}=t.target;s(d=>({...d,[r]:a}))},w=t=>{const{value:r}=t.target;s(a=>({...a,metadata:{...a.metadata,type:r,value:""}}))},k=t=>{const r=t.target.files;r&&r.length>0?s(a=>({...a,metadata:{...a.metadata,image:r[0]}})):s(a=>({...a,metadata:{...a.metadata,image:null}}))},B=t=>{const{value:r}=t.target;s(a=>({...a,metadata:{...a.metadata,value:r}}))},S=async t=>{t.preventDefault();const{name:r,metadata:a}=o,d={name:r,metadata:a};try{const l=new FormData;if(l.append("name",d.name),l.append("type",d.metadata.type),l.append("value",a.image?"image":d.metadata.value),a.image&&l.append("image",a.image),m&&x)try{await u.post(`/api/contents/${x.id}/update`,l),await i.fire({icon:"success",title:"Success",text:"Content updated successfully!",timer:2e3,confirmButtonColor:"#3085d6"})}catch{await i.fire({icon:"error",title:"Error",text:"Could not update the content. Please try again.",timer:2e3,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})}else try{await u.post("/api/contents",l),await i.fire({icon:"success",title:"Success",text:"Content created successfully!",timer:2e3,confirmButtonColor:"#3085d6"})}catch{await i.fire({icon:"error",title:"Error",text:"Could not save content. Please try again.",timer:2e3,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})}g(),N()}catch(l){console.error("Error saving content:",l)}},E=t=>{y(t),s({name:t.name,metadata:{image:null,type:t.metadata.type,value:t.metadata.value}}),f(!0),h(!0)},T=async t=>{if((await i.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6"})).isConfirmed)try{await u.delete(`/api/contents/${t}`),g(),await i.fire({icon:"success",title:"Deleted!",text:"Your content has been deleted.",timer:2e3,confirmButtonColor:"#3085d6"})}catch(a){console.error("Error deleting schedule:",a),await i.fire({icon:"error",title:"Error",text:"Could not delete content. Please try again.",timer:2e3,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})}};return n("div",{className:"p-4 flex flex-col overflow-hidden",children:[e("nav",{className:"text-gray-500 mb-4","aria-label":"Breadcrumb",children:n("ol",{className:"flex text-gray-500 font-semibold dark:text-white-dark",children:[e("li",{children:e("button",{className:"hover:text-gray-500/70 dark:hover:text-white-dark/70",children:n("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",children:[e("path",{d:"M2 16C2 13.1716 2 11.7574 2.87868 10.8787C3.75736 10 5.17157 10 8 10H16C18.8284 10 20.2426 10 21.1213 10.8787C22 11.7574 22 13.1716 22 16C22 18.8284 22 20.2426 21.1213 21.1213C20.2426 22 18.8284 22 16 22H8C5.17157 22 3.75736 22 2.87868 21.1213C2 20.2426 2 18.8284 2 16Z",stroke:"currentColor",strokeWidth:"1.5"}),e("path",{opacity:"0.5",d:"M6 10V8C6 4.68629 8.68629 2 12 2C15.3137 2 18 4.68629 18 8V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})})}),e("li",{className:"before:content-['/'] before:px-1.5",children:e("button",{type:"button",children:"Pengaturan"})})]})}),n("div",{className:"container mx-auto py-1 px-4 sm:px-0",children:[e("button",{className:"flex items-center justify-center mb-2 px-2 py-2 text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-200 ease-in-out",onClick:()=>{f(!1),h(!0)},children:"Tambah Konten Baru"}),e("div",{className:"overflow-x-auto bg-white shadow-md rounded-lg",children:n("table",{className:"min-w-full table-auto",children:[e("thead",{className:"bg-gray-100 text-black font-bold",children:n("tr",{children:[e("th",{className:"py-3 px-4 text-left",children:"No"}),e("th",{className:"py-3 px-4 text-left",children:"Nama Konten"}),e("th",{className:"py-3 px-4 text-left",children:"Type"}),e("th",{className:"py-3 px-4 text-left",children:"Value"}),e("th",{className:"py-3 px-1 text-left",children:"Actions"})]})}),e("tbody",{className:"divide-y divide-gray-200",children:p.length===0?e("tr",{children:e("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No contents found."})}):p.map((t,r)=>n("tr",{className:"hover:bg-gray-50",children:[e("td",{className:"py-3 px-4",children:r+1}),e("td",{className:"py-3 px-4",children:t.name}),e("td",{className:"py-3 px-4",children:t.metadata.image?"image":"text"}),e("td",{className:"py-3 px-4",children:t.metadata.image?e("img",{src:`/storage/${t.metadata.image}`,className:"w-16 h-16 object-cover rounded ml-3 sm:ml-2 mr-10 md:-mr-8 lg:-mr-20",alt:"Content"}):t.metadata.value}),e("td",{className:"py-4 px-1 flex items-center space-x-2",children:n("div",{className:"mt-3",children:[e("button",{onClick:()=>E(t),className:"text-blue-600 hover:text-blue-800 focus:outline-none",children:e(P,{size:20})}),e("button",{onClick:()=>T(t.id),className:"text-red-600 hover:text-red-800 focus:outline-none ml-2",children:e(D,{size:20})})]})})]},t.id))})]})}),b&&e("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto bg-black bg-opacity-50",children:n("div",{className:"w-full max-w-md p-6 mx-auto bg-white rounded-lg shadow-lg",children:[e("h2",{className:"text-lg font-semibold text-gray-800",children:m?"Edit Konten":"Tambah Konten Baru"}),n("form",{onSubmit:S,className:"mt-4",children:[n("div",{className:"mb-4",children:[e("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nama Konten"}),e("input",{type:"text",id:"name",name:"name",value:o.name,onChange:v,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0})]}),n("div",{className:"mb-4",children:[e("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700",children:"Tipe"}),n("select",{id:"type",name:"type",value:o.metadata.type,onChange:w,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e("option",{value:"",children:"Pilih Tipe"}),e("option",{value:"string",children:"Text"}),e("option",{value:"image",children:"Image"})]})]}),o.metadata.type==="text"||o.metadata.type==="string"&&n("div",{className:"mb-4",children:[e("label",{htmlFor:"value",className:"block text-sm font-medium text-gray-700",children:"Nilai"}),e("input",{type:"text",id:"value",name:"value",value:o.metadata.value,onChange:B,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),o.metadata.type==="image"&&n("div",{className:"mb-4",children:[e("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Unggah Gambar"}),e("input",{type:"file",id:"image",onChange:k,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),n("p",{className:"text-red-600 mt-1 text-xs",children:[" ",m?"*Upload the image if you want to change your image":""]})]}),n("div",{className:"flex justify-end mt-4",children:[e("button",{type:"button",onClick:N,className:"mr-2 text-gray-500 hover:text-gray-700",children:"Batal"}),e("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-200 ease-in-out",children:m?"Update Konten":"Simpan Konten"})]})]})]})})]})]})};export{H as default};
