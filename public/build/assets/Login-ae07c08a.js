import{r as s,a as i,b as t,j as c,S as y}from"./main-0ef92fc4.js";const v=()=>{const[u,p]=s.useState(""),[m,w]=s.useState(""),[f,d]=s.useState(""),[l,g]=s.useState(!1),[o,b]=s.useState("footer"),x=async a=>{try{const e=await i.get("/api/contents",{params:{name:a}});if(e.data&&e.data.contents){const r=e.data.contents.map(n=>({...n,metadata:JSON.parse(n.metadata)}));return r[0].metadata.type==="image"?r[0].metadata.image:r[0].metadata.value}else return""}catch(e){return console.error("Error fetching contents:",e),""}};return s.useEffect(()=>{var n;const a=(n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content");a&&(i.defaults.headers.common["X-CSRF-TOKEN"]=a);const e=async()=>{if((await i.get("/api/auth-check")).data.authenticated){window.history.back();return}},r=async()=>{const h=await x("footer");b(h)};e(),o==="footer"&&r()},[o]),t("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:c("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-lg shadow-md",children:[t("div",{className:"flex flex-col justify-center items-center space-y-4",children:t("img",{src:"/assets/images/yasmaga_1.png",alt:"Radio Yasmaga",className:"w-auto h-12 max-w-xs object-contain "})}),f&&t("div",{className:"p-3 text-red-500 bg-red-100 rounded",children:f}),c("form",{onSubmit:async a=>{a.preventDefault(),g(!0),d("");try{(await i.post("/api/login",{identifier:u,password:m})).status===200&&(await y.fire({icon:"success",title:"Login Success",text:"You will be redirected to the dashboard",timer:2e3,confirmButtonColor:"#3085d6"}),window.location.href="/admin")}catch(e){e.response&&e.response.data.errors?d(e.response.data.errors.identifier?e.response.data.errors.identifier[0]:"Login failed. Check your credentials."):d("Login failed. Please try again later.")}finally{g(!1)}},className:"space-y-6",children:[c("div",{children:[t("label",{htmlFor:"identifier",className:"block mb-1 text-sm font-medium text-gray-600",children:"Email/Username"}),t("input",{type:"text",id:"identifier",value:u,onChange:a=>p(a.target.value),placeholder:"Masukkan Email/Username",required:!0,className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),c("div",{children:[t("label",{htmlFor:"password",className:"block mb-1 text-sm font-medium text-gray-600",children:"Password"}),t("input",{type:"password",id:"password",value:m,onChange:a=>w(a.target.value),placeholder:"Masukkan Password",required:!0,className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),t("button",{type:"submit",disabled:l,className:`w-full p-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 ${l?"opacity-50 cursor-not-allowed":""}`,children:l?"Logging in...":"Login"})]}),t("p",{className:"text-sm text-center text-gray-600",children:t("span",{className:"block text-xs text-gray-600",children:"Belum punya akun? Silakan hubungi admin"})}),t("div",{className:"dark:text-white-dark text-center text-xs mt-auto",children:o==="footer"?"© ":"© "+o})]})})};export{v as default};
